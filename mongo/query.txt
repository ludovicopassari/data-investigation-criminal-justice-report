
1. Ottenere informazioni anagrafiche di una persona cercando per nome, e cognome [db.people.find({first_name:"Sarah", last_name:"Howard"},{ first_name: 1, last_name: 1, date_of_bith : 1, residence :1 ,gender:1,_id: 0 })]

2. Trovare tutte le persone indagate che sono legate ad uno specifico evento [db.events.aggregate([
    {
        $match: {_id : 5}
    },
    { 
        $lookup: {
        from: "people",
        localField: "linked_to",
        foreignField: "_id",
         as: "people_details"
        }
    },
    {
        $unwind: "$people_details"  // "Unisci" ogni persona in un documento separato
    },
    {
        $match: {"people_details.status" : "Suspected"}
    }
])]

3. Trovare tutte le residenze delle persone coinvolte in eventi correlati ad un evento specifico.

db.events.aggregate([
    {
        $match: {_id : 0}
    },
    {
        $lookup: {
               from: "events",
               localField: "related_events",
               foreignField: "_id",
               as: "linked_events"
             }
    },
    {
        $unwind: "$linked_events"
    },
    {
        $lookup: {
               from: "people",
               localField: "linked_events.linked_to",
               foreignField: "_id",
               as: "people_details"
             }
    },
    {
        $unwind: "$people_details"
    },
    // Fase 6: Proietta solo la residenza delle persone coinvolte
  {
    $project: {
      "people_details.residence": 1,// Residenza della persona
      "people_details.first_name": 1,
      "people_details.last_name": 1,
      "description" : 1,
      "_id" : 0
    }
  }
])

4. Trovare il propietario(se ci sono) di un oggetto che è legato ad un evento specifico

db.events.aggregate([
        {
            $match: {_id : 10}
        },
        {
            $lookup: {
                   from: "objects",
                   localField: "related_objects",
                   foreignField: "_id",
                   as: "obj"
                 }
        },
        {
            $unwind: "$obj"
        },
        {
            $lookup: {
                   from: "people",
                   localField: "obj.proprietario",
                   foreignField: "_id",
                   as: "owners"
                 }
        },
        {
            $unwind: "$owners" 
        },{
            $project: {
                "owners.first_name" :1
            }
        }
        
    ])

5. trovare il propietario di un oggetto ritrovato in una determinata locataion che è stata sede di un evento particolare.